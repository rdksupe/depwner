<script lang="ts">
	import HomeButton from '../components/+HomeButton.svelte';

	import {
		ScanSearch,
		RefreshCcw,
		ShieldIcon,
		ChartSpline,
		Logs,
		ScrollIcon,
		ScrollTextIcon,
		FileTextIcon
	} from 'lucide-svelte';

	const statusMessages = {
		Okay: {
			message: 'Secure',
			fix: 'No Threats detected',
			link: '',
			icon: ShieldIcon,
			color: 'lime'
		},
		Threat: {
			message: 'Threat Detected',
			fix: 'Take action now',
			link: ''
		},
		Disabled: {
			message: 'DePWNer is Disabled',
			fix: 'Enable now',
			link: ''
		},
		FeatureDisabled: {
			message: 'Some Security features were disabled',
			fix: 'Enable them now',
			link: ''
		}
	};

	let status = $state(statusMessages.Okay);
</script>

<svelte:head>
	<title>DePWNer</title>
</svelte:head>

<div class="dashContainer grid grid-cols-4 text-center">
	<HomeButton href="/scan">
		<RefreshCcw />
		<h3>Start a Scan</h3>
	</HomeButton>
	<HomeButton>
		<ChartSpline />
		<h3>Statistics</h3>
	</HomeButton>
	<HomeButton>
		<FileTextIcon />
		<h3>Scan Reports</h3>
	</HomeButton>
	<HomeButton>
		<ScanSearch />
		<h3>Run a Scan</h3>
	</HomeButton>
	<div
		class="homeStatusCard card col-start-3 col-end-5 row-start-1 row-end-3 rounded-[2vh] bg-catp-mantle"
	>
		<div class="cardInner grid justify-items-center">
			<status.icon />
			<h3 class="relative">
				{status.message}
				<span class="absolute bottom-0 right-[-30%] top-0 my-auto inline-flex size-3">
					<span
						class="absolute inline-flex h-full w-full animate-ping rounded-full bg-lime-400 opacity-75"
					></span>
					<span class="relative inline-flex size-3 rounded-full bg-lime-500"></span></span
				>
			</h3>
		</div>
	</div>
</div>

<style>
	.animate-ping {
		animation-duration: 2s;
	}
	.dashContainer {
		gap: min(2vh, 1.5vw);
	}
	.homeStatusCard {
		padding: min(5vh, 4vw);
		/* font-size: 2vh; */
	}
	.homeStatusCard :global(.lucide-icon) {
		--icon-size: min(15vh, 12vw);
		height: var(--icon-size);
		width: var(--icon-size);
	}
</style>
